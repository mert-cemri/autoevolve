# Configuration for circle packing constructor evolution (n=26)
max_iterations: 100  # Increased iterations
checkpoint_interval: 10
log_level: "INFO"

# LLM configuration
llm:
  primary_model: "gpt-5"
  api_base: "https://api.openai.com/v1"
  primary_model_weight: 1.0
  temperature: 0.7
  top_p: 0.95
  max_tokens: 32000
  timeout: 600

# Prompt configuration
prompt:
  system_message: |
    You are an expert mathematician specializing in circle packing problems and computational geometry. Your task is to improve a constructor function that directly produces a specific arrangement of 26 circles in a unit square, maximizing the sum of their radii. The AlphaEvolve paper achieved a sum of 2.635 for n=26.

    Key geometric insights:
    - Circle packings often follow hexagonal patterns in the densest regions
    - Maximum density for infinite circle packing is pi/(2*sqrt(3)) â‰ˆ 0.9069
    - Edge effects make square container packing harder than infinite packing
    - Circles can be placed in layers or shells when confined to a square
    - Similar radius circles often form regular patterns, while varied radii allow better space utilization
    - Perfect symmetry may not yield the optimal packing due to edge effects

    Focus on designing an explicit constructor that places each circle in a specific position, rather than an iterative search algorithm.
  num_top_programs: 3
  use_template_stochasticity: true

# Database configuration
database:
  population_size: 60  # Increased population for more diversity
  archive_size: 25
  num_islands: 4
  elite_selection_ratio: 0.3
  exploitation_ratio: 0.7

  # Adaptive exploration settings
  use_adaptive_search: true
  adaptive_window_size: 20
  adaptive_min_exploration: 0.1
  adaptive_max_exploration: 0.7

  # Softmax sampling for exploitation
  exploitation_temperature: 1.0  # Controls sharpness of softmax (lower = more greedy)

  # Stagnation detection and multi-child generation
  stagnation_threshold: 10  # Iterations without improvement to trigger stagnation
  stagnation_multi_child_count: 3  # Number of diverse children to generate on stagnation

  # Sibling context for prompts
  sibling_context_limit: 5  # Number of previous children to show in prompt

  # ============================================
  # AutoEvolve Advanced Features (Sky Lab UC Berkeley)
  # ============================================
  
  # Paradigm Breakthrough: Triggers LLM-based breakthrough idea generation when evolution stagnates
  enable_paradigm_breakthrough: true  # Enable breakthrough paradigm generation
  stagnation_window: 5                # Iterations to track for improvement rate
  stagnation_improvement_threshold: 0.01  # Minimum 1% improvement required over window
  paradigm_model: "gpt-5-mini"        # Model for generating breakthrough ideas
  # paradigm_api_key: uses OPENAI_API_KEY env var by default
  
  # Error Retry: Automatically retries failed generations/evaluations
  enable_error_retry: true            # Enable automatic error retry
  max_error_retries: 2                # Max retries per iteration (total 3 attempts)

# Evaluator configuration
evaluator:
  timeout: 60
  cascade_evaluation: true
  cascade_thresholds: [0.5, 0.75]
  parallel_evaluations: 4
  use_llm_feedback: false

# Evolution settings
diff_based_evolution: false  # Use full rewrites instead of diffs
allow_full_rewrites: true    # Allow full rewrites for constructor functions
